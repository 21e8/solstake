{"version":3,"sources":["utils/ids.ts","utils/stakeAccounts.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["STAKE_PROGRAM_ID","PublicKey","findStakeAccountMetas","connection","walletAddress","a","newStakeAccountMetas","i","seed","createWithSeed","stakeAccountPublicKey","console","log","toBase58","getAccountInfo","accountInfo","getParsedAccountInfo","value","data","parsed","stakeAccount","push","address","balance","lamports","LAMPORTS_PER_SOL","demoStakeAccounts","Connection","clusterApiUrl","App","useState","publicKey","setPublicKey","loading","setLoading","errorInfo","setErrorInfo","stakeAccounts","setStakeAccounts","pk","useEffect","fetchStakeAccounts","AppBar","position","Toolbar","Typography","variant","color","noWrap","style","flexGrow","display","gap","Button","disabled","Menu","anchorOrigin","vertical","horizontal","transformOrigin","open","MenuItem","Container","maxWidth","TextField","id","label","error","helperText","onChange","e","target","Sync","Skeleton","height","map","Card","CardContent","gutterBottom","component","type","info","stake","delegation","activationEpoch","voter","href","OpenInNew","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.97b6e1ac.chunk.js","sourcesContent":["import { PublicKey } from \"@solana/web3.js\";\n\nexport const STAKE_PROGRAM_ID = new PublicKey('Stake11111111111111111111111111111111111111');","import { Connection, LAMPORTS_PER_SOL, PublicKey } from \"@solana/web3.js\";\nimport { StakeAccount } from \"../validators/accounts/accounts\";\nimport { STAKE_PROGRAM_ID } from \"./ids\";\n\nexport interface StakeAccountMeta {\n    address: PublicKey;\n    seed: string;\n    balance: number;\n    stakeAccount?: StakeAccount;\n}\n\nexport async function findStakeAccountMetas(connection: Connection, walletAddress: PublicKey): Promise<StakeAccountMeta[]> {\n    let newStakeAccountMetas: StakeAccountMeta[] = [];\n\n    // We discover account with the solfalre seed only for now\n    for(let i = 0;i<8;i++) {\n      const seed = `stake:${i}`;\n\n      const stakeAccountPublicKey = await PublicKey.createWithSeed(walletAddress, seed, STAKE_PROGRAM_ID);\n      console.log(stakeAccountPublicKey.toBase58());\n      const accountInfo = await connection.getAccountInfo(stakeAccountPublicKey);\n      const {value} = await connection.getParsedAccountInfo(stakeAccountPublicKey);\n\n      if (value?.data && 'parsed' in value?.data) {\n        console.log(value?.data.parsed);\n        const stakeAccount = value?.data.parsed as StakeAccount;\n\n        newStakeAccountMetas.push({\n          address: stakeAccountPublicKey,\n          seed,\n          balance: accountInfo?.lamports ? accountInfo?.lamports / LAMPORTS_PER_SOL : 0,\n          stakeAccount\n        });\n      }\n    }\n\n    return newStakeAccountMetas;\n}","import React, { useEffect, useState } from 'react';\n//import logo from './logo.svg';\nimport './App.css';\nimport { AppBar, Button, Card, CardContent, Container, Link as L2, Menu, MenuItem, TextField, Toolbar, Typography } from '@material-ui/core';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport { clusterApiUrl, Connection, PublicKey } from '@solana/web3.js';\nimport { OpenInNew, Sync } from '@material-ui/icons';\nimport { findStakeAccountMetas, StakeAccountMeta } from './utils/stakeAccounts';\n\nconst demoStakeAccounts: StakeAccountMeta[] = [\n  {address: new PublicKey(0), seed: 'stake:0', balance: 123.23},\n  {address: new PublicKey(0), seed: 'stake:1', balance: 221.0},\n  {address: new PublicKey(0), seed: 'stake:2', balance: 1}\n];\n\nconst connection = new Connection(clusterApiUrl('mainnet-beta'))\n\nfunction App() {\n  const [publicKey, setPublicKey] = useState<PublicKey | null>(null);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [errorInfo, setErrorInfo] = useState<string | null>(null);\n  const [stakeAccounts, setStakeAccounts] = useState<StakeAccountMeta[]>(demoStakeAccounts);\n\n  async function fetchStakeAccounts(pk: PublicKey) {\n    setStakeAccounts(await findStakeAccountMetas(connection, pk));\n    setLoading(false);\n  }\n\n  useEffect(() => {\n    setStakeAccounts([]);\n    if (publicKey !== null) {\n      setLoading(true);\n      fetchStakeAccounts(publicKey);\n    }\n  }, [publicKey]);\n  \n  return (\n    <>\n      <AppBar position=\"relative\">\n        <Toolbar>\n          <Typography variant=\"h6\" color=\"inherit\" noWrap>\n            Solstake\n          </Typography>\n        <div style={{flexGrow: 1}}></div>\n        <div style={{display: 'flex', gap: '10px'}}>\n          <Button variant=\"contained\" disabled>Demo</Button>\n          <Button variant=\"contained\">Connect wallet</Button>\n        </div>\n        </Toolbar>\n      </AppBar>\n      <Menu\n          anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n          transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n          open={false}\n      >\n          <MenuItem>Demo</MenuItem>\n      </Menu>\n      <main>\n        <Container maxWidth=\"sm\">\n          <TextField\n            id=\"standard-basic\"\n            label=\"Wallet public key\"\n            value={publicKey?.toBase58()}\n            error={errorInfo !== null}\n            helperText={errorInfo}\n            onChange={async function(e) {\n              try {\n                const walletAddress = new PublicKey(e.target.value);\n                setErrorInfo(null);\n                setPublicKey(walletAddress);\n              }\n              catch {\n                console.log(`${e.target.value} is not a valid PublicKey input`);\n\n                setErrorInfo('Invalid public key');\n                setPublicKey(null);\n              }\n            }}\n          />\n          <Button>\n            <Sync />\n          </Button>\n          <Container>\n          {loading ? (<Skeleton height={200}></Skeleton>): stakeAccounts.map(stakeAccount => (\n            <Card variant=\"outlined\">\n              <CardContent>\n                <Typography color=\"textSecondary\" gutterBottom>\n                  {`${stakeAccount.seed}`}\n                </Typography>\n                <Typography variant=\"h5\" component=\"h2\">\n                  {`Balance: ${stakeAccount.balance} SOL`} \n                </Typography>\n                <Typography color=\"textSecondary\">\n                  { stakeAccount.stakeAccount ? `Type: ${stakeAccount.stakeAccount.type}, activation epoch: ${stakeAccount.stakeAccount.info.stake?.delegation.activationEpoch}, voter: ${stakeAccount.stakeAccount.info.stake?.delegation.voter}` : 'No data' }\n                </Typography>\n                <L2 href={`https://explorer.solana.com/address/${stakeAccount.address.toBase58()}`}>\n                  <OpenInNew />\n                </L2>\n              </CardContent>\n              {/* <CardActions>\n                <Button variant=\"contained\">Coming soon</Button>\n              </CardActions> */}\n            </Card>\n          ))}\n          </Container>\n        </Container>\n      </main>\n    </>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}